####Load and Clean####
file_path <- file.path("C:/Users/GSamuels/Box/LA Transit project/Social Climate Analysis")
##census tracts##
CA_tracts <- st_read(file.path(file_path, "Hoover/Mapping/CA_census_Tracts.shp"))
library(sf)
##census tracts##
CA_tracts <- st_read(file.path(file_path, "Hoover/Mapping/CA_census_Tracts.shp"))
##Population##
sex_by_age <- get_acs(
table = "B01001",
state = "CA",
county = "Los Angeles",
geometry = TRUE
)
library(tidycensus)
library(dplyr)
library(tidyr)
library(readxl)
library(tidyverse)
library(ggplot2)
library(geofacet)
library(dotenv)
library(sf)
library(urbnthemes)
options(scipen=999)
set_urbn_defaults(style="print")
####Load and Clean####
file_path <- file.path("C:/Users/GSamuels/Box/LA Transit project/Social Climate Analysis")
####Load and Clean####
#set personal file path to make it easier to pull data
file_path <- file.path("C:/Users/GSamuels/Box/LA Transit project/Social Climate Analysis")
##census tracts##
CA_tracts <- st_read(file.path(file_path, "Hoover/Mapping/CA_census_Tracts.shp"))
la_tracts <- CA_tracts %>% filter(COUNTYFP == "037")
#pico tracts
pico_tracts <- st_read(file.path(file_path, "Pico/Maps/pico_buffer_tracts.shp"))
#load in census api key
Sys.getenv("CENSUS_API_KEY")
##Population##
sex_by_age <- get_acs(
table = "B01001",
state = "CA",
county = "Los Angeles",
geometry = TRUE
)
##Population##
sex_by_age <- get_acs(
geography = tract,
table = "B01001",
state = "CA",
county = "Los Angeles",
geometry = TRUE
)
##Population##
sex_by_age <- get_acs(
geography = "tract",
table = "B01001",
state = "CA",
county = "Los Angeles",
geometry = TRUE
)
##Population##
sex_by_age <- get_acs(
geography = "tract",
table = "B01001",
state = "CA",
county = "Los Angeles",
year = 2023,
survey = "acs5",
geometry = TRUE
)
View(sex_by_age)
##Race and Ethnicity##
race <- get_acs(
geography = "tract",
table = "B02001",
state = "CA",
county = "Los Angeles",
year = 2023,
survey = "acs5",
geometry = TRUE
)
ethnicity <-
get_acs(
geography = "tract",
table = "B03002",
state = "CA",
county = "Los Angeles",
year = 2023,
survey = "acs5",
geometry = TRUE
)
##Median Income/Poverty##
median_income <-
get_acs(
geography = "tract",
table = "B19013",
state = "CA",
county = "Los Angeles",
year = 2023,
survey = "acs5",
geometry = TRUE
)
####Data Analysis####
#set fips codes
state_fips <- "06"
county_fips <- "037"
unique(poverty_data$variable)
poverty_level <-
get_acs(
geography = "tract",
table = "B17001",
state = state_fips,
county = county_fips,
year = 2023,
survey = "acs5",
geometry = TRUE
)
unique(poverty$variable)
unique(poverty_level$variable)
View(poverty_level)
poverty_level <-
get_acs(
geography = "tract",
table = "B17001",
state = state_fips,
county = county_fips,
year = 2023,
survey = "acs5",
geometry = TRUE,
labels = TRUE
)
View(poverty_level)
##Median Income/Poverty##
median_income <-
get_acs(
geography = "tract",
table = "B19013",
state = state_fips,
county = county_fips,
year = 2023,
survey = "acs5",
labels = TRUE
geometry = TRUE
##Median Income/Poverty##
median_income <-
get_acs(
geography = "tract",
table = "B19013",
state = state_fips,
county = county_fips,
year = 2023,
survey = "acs5",
labels = TRUE,
geometry = TRUE
)
View(median_income)
##Disadvantaged communities##
ces_disadvantaged <- read_excel(file.path(file_path, "Data/Disadvantaged/SB535DACresultsdatadictionary_F_2022.xlsx"))
#Gabe
file_path <- file.path("C:/Users/GSamuels/Box/LA Transit project/Social Climate Analysis")
#used for loading/saving excel files
library(readxl)
##Disadvantaged communities##
ces_disadvantaged <- read_excel(file.path(file_path, "Data/Disadvantaged/SB535DACresultsdatadictionary_F_2022.xlsx"))
##Disadvantaged communities##
ces_disadvantaged <- read_excel(file.path(file_path, "Data/Disadvantaged/SB535DACresultsdatadictionary_F_2022.xlsx"))
View(ces_disadvantaged)
##Disadvantaged communities##
ces_disadvantaged <- read_excel(file.path(file_path, "Data/Disadvantaged/SB535DACresultsdatadictionary_F_2022.xlsx", sheet = 4))
#used for loading/saving excel files
library(openxlsx)
##Disadvantaged communities##
ces_disadvantaged <- read_xlsx(file.path(file_path, "Data/Disadvantaged/SB535DACresultsdatadictionary_F_2022.xlsx", sheet = 4))
##Disadvantaged communities##
ces_disadvantaged <- read.xlsx(file.path(file_path, "Data/Disadvantaged/SB535DACresultsdatadictionary_F_2022.xlsx", sheet = 4))
##Disadvantaged communities##
ces_disadvantaged <- read.xlsx(file.path(file_path, "Data/Disadvantaged/sb535_tract_all_data.xlsx"))
View(ces_disadvantaged)
#pico tracts
pico_tracts <- st_read(file.path(file_path, "Pico/Maps/pico_buffer_tracts.shp"))
#used for shapefile functions
library(sf)
#pico tracts
pico_tracts <- st_read(file.path(file_path, "Pico/Maps/pico_buffer_tracts.shp"))
View(pico_tracts)
##Disadvantaged communities##
ces_disadvantaged <- read.xlsx(file.path(file_path, "Data/Disadvantaged/sb535_tract_all_data.xlsx"))%>%
rename(Census.Tract = "GEOID")
##Disadvantaged communities##
ces_disadvantaged <- read.xlsx(file.path(file_path, "Data/Disadvantaged/sb535_tract_all_data.xlsx"))%>%
rename(GEOID = Census.Tract)
#contains analysis packages
library(dplyr)
##Disadvantaged communities##
ces_disadvantaged <- read.xlsx(file.path(file_path, "Data/Disadvantaged/sb535_tract_all_data.xlsx"))%>%
rename(GEOID = Census.Tract)
View(ces_disadvantaged)
#load in displacement risk
displacement_risk <- read.csv(file.path(file_path, "Data/la_displacement_index.csv"))
View(displacement_risk)
##H+T Index metrics##
#pull H+T data
ht_index <- read.csv(file.path(file_path, "Data/htaindex2022_data_tracts_06.csv"))%>%
rename(GEOID = tract)%>%
mutate(GEOID = gsub('"', '', GEOID))%>%
mutate(GEOID = as.numeric(GEOID))
##H+T Index metrics##
#pull H+T data
ht_index <- read.csv(file.path(file_path, "Data/htaindex2022_data_tracts_06.csv"))%>%
rename(GEOID = tract)%>%
mutate(GEOID = gsub('"', '', GEOID))%>%
mutate(GEOID = as.numeric(GEOID))
##H+T Index metrics##
#pull H+T data
ht_index <- read.csv(file.path(file_path, "Data/htaindex2022_data_tracts_06.csv"))%>%
rename(GEOID = tract)%>%
mutate(GEOID = gsub('"', '', GEOID))%>%
mutate(GEOID = as.numeric(GEOID))
View(ht_index)
